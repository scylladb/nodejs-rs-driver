# Examples

## How to run examples

The examples are configured to run from the source code, instead of downloading a package from package manager. This means that you must build the driver (see [Contributing](../CONTRIBUTING.md#local-installation-and-build-process)).

Before running examples, you need to build the driver (see: [CONTRIBUTING.MD](../CONTRIBUTING.md#local-installation-and-build-process))
and install packages for the examples by running in this directory:

```bash
npm install
```

You also need Cassandra or ScyllaDB running with at least three nodes
(the examples use a replication factor 3 which can be satisfied by a database containing at least that number of nodes).
By default, examples assume the entrypoint for the database is ``172.17.0.2:9042`` but you can change it by setting ``SCYLLA_URI`` env variable.

You can run all examples with the following command:

```bash
npm run examples
```

This will check if all examples finished successfully, but will hide any output generated by the examples.

Alternatively you can run just a specific example by providing the path to it:

```bash
node ./basic/basic-connect.js
```

## Code samples

Part of the examples listed here are from the [datastax driver repository](https://github.com/datastax/nodejs-driver/tree/master).
Some of the examples use features that are not yet implemented.
Those examples are present in this directory and have the `.broken` in the name but are not listed below.

- Basic
  - [Connect](basic/basic-connect.js)
  - [Execute with promise-based API](basic/basic-execute.js)
  - [Execute using callbacks](basic/basic-execute-flow.js)
<!-- - Mapper
  - [Insert and retrieve using the Mapper](mapper/mapper-insert-retrieve.js) -->
<!-- - Metadata
  - [Get hosts information](metadata/metadata-hosts.js)
  - [Get keyspaces information](metadata/metadata-keyspaces.js)
  - [Get table information](metadata/metadata-table.js) -->
- Data types
  - [Working with user-defined types (UDT)](udt/udt-insert-select.js)
  - [Working with tuples](tuple/tuple-insert-select.js)
<!-- - Query tracing
  - [Retrieving the trace of a query request](tracing/retrieve-query-trace.js) -->
- Concurrent execution
  - [Insert multiple rows in a table from an Array using built-in
    method](concurrent-executions/execute-concurrent-array.js)
  - [Execute multiple queries in a loop with a defined concurrency level](concurrent-executions/execute-in-loop.js)
- Paging
  - [Shows usage of ``client.eachRow()``, without auto paging.](./paging/each-row.js)
  - [Shows usage of ``client.eachRow()``, with auto paging.](./paging/each-row-auto-paged.js)

Each example is generally structured in a way where the `Client` is connected at the beginning.
While this is suitable for example single script purposes, you should reuse a single `Client` instance.
